# Lab_06 AWS S3

#### Проект реализован с помощью HTML, JS, CSS, Axios, jQuery и NodeJs, AWS-SDK

#### Запуск проекта на Windows

В первую очередь создаем аккаунт на Amazon Web Serwises (AWS) https://aws.amazon.com/ru/

В процессе создания у меня сняли 1$, но обещали вернуть.

Переходим во вкладку **My Security Credentials**. Разворачиваем список **Access keys (access key ID and secret access key)** и создаем новые ключи доступа. Записываем или сохраняем эти ключи. Они еще пригодятся.

Т.к. я работал с ОС Windows 10, то следующей задачей нужно создать по пути **C:\Users\HP\.aws** файл **credentials** с ВАШИМИ ключами доступа:

    [default]
    aws_access_key_id=AK***BA
    aws_secret_access_key=WI**Dt
    
После этой операции, ключи будут автоматически подтягиваться модулем **awk-sdk**   

Далее, все на той же web-странице раскрыть список **Servises** и в заголовке **Storage** выбрать **S3**.

Прописываем **Bucket name** оно должно быть уникальных на всех пользователей системы и состоять !только из строчных букв. Остальные параметры по дефолту. Жмём **Create bucket**

Запоминаем название Bucket. Оно также нам еще пригодится.

Скачиваем репозиторий командой **git clone https://github.com/AcoaAera/Laby_work** 

Выполняем команду **npm install**. После установки всех зависимостей в проект переходим в файл **sever.js** и меняем **const BUCKET_NAME** на свое название Bucket.

Выполняем команду **node server.js**, переходим по ссылке **http://127.0.0.1:7000** и загружаем, а после получаем, картинку из облачного хранилища S3. 

Все загруженные файлы можно посмотреть по пути **https://s3.console.aws.amazon.com/s3/home**, выбрав свой Bucket.


#### Описание файла *index.html*

Из интересного:

1. При загрузке страницы вызывается функция **download**, которая в свою очередь выполняет ajax-запрос по пути **/download**. При получении положительного ответа от сервера удаляются все дочерние элементы элемента с **id="images"**, а после заполняются изображениями полученными от сервера.

2. При нажатии на кнопку **Загрузить файл** срабатывает триггер, в которой выполняется axios запрос по пути **/upload**. После успешного ответа от сервера снова выполняется функция **download**


#### Описание файла *server.js*

Рассмотрим роуты **/download** и **/upload**.

##### **/download**

Методом **listObjects** получаем все файлы нашего Bucket облачного хранилища **S3**. После возвращается массив полученных элементов в необходимом формате.

##### **/upload**

Методом **upload** загружаем изображение в  Bucket облачного хранилища **S3**.



